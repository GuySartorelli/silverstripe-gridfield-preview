(()=>{var e,t,i,n;e=jQuery,i=".cms-preview",n='.cms-preview-states .state-name[data-name="'.concat(t="Gridfield",'"]'),e.entwine("ss.preview",(function(e){e(i).entwine({getGridfieldStateButton:function(){return e(n)},allowGridfieldState:function(){var e=this.getAllowedStates();e.includes(t)||(e.push(t),this.setAllowedStates(e))},previewFromGridfield:function(i){e(n).attr("href",i),this.enablePreview(),this.changeState(t,!1),"content"===e(".preview-mode-selector select").val()&&this.changeMode("split",!1),this.is(":visible")||this.changeMode("preview",!1)},changeState:function(e){e===t?this.getGridfieldStateButton().show():this.getGridfieldStateButton().hide();for(var i=arguments.length,n=new Array(i>1?i-1:0),a=1;a<i;a++)n[a-1]=arguments[a];this._super.apply(this,[e].concat(n))}}),e(".grid-field .gridfield-preview-btn").entwine({onmatch:function(){e(i).allowGridfieldState(),this.on("click",this.handleClick)},handleClick:function(t){return t.preventDefault(),t.stopPropagation(),e(i).previewFromGridfield(this.data("preview-link")),!1}})}))})();