(()=>{var e,t;e=jQuery,t="gridfield-preview",e.entwine("ss.preview",(function(e){e(".cms-preview").entwine({CurrentURL:null,hasGridFieldPreviewButton:function(){return e("button.gridfield-preview-btn").length>0},getAllowedStates:function(){var e=this._super();return this.hasGridFieldPreviewButton()&&e.push(t),e},_getNavigatorStates:function(){var e=this._super();return this.hasGridFieldPreviewButton()&&e.push({name:t,url:this.getCurrentURL(),active:!0}),e},previewSomeURL:function(i){this.setCurrentURL(i),this.setCurrentStateName(t),this.enablePreview(),this._loadUrl(i),"content"===e(".preview-mode-selector select").val()&&this.changeMode("split",!1),this.is(":visible")||this.changeMode("preview",!1)}}),e(".gridfield-preview-btn").entwine({onmatch:function(){this.on("click",this.handleClick)},handleClick:function(t){return t.preventDefault(),t.stopPropagation(),e(".cms-preview").previewSomeURL(this.data("preview-link")),!1}})}))})();